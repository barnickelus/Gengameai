<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Genesis Evolution – Neon Frenzy</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <style>
    html,body{margin:0;height:100%;background:#060616;overflow:hidden;font-family:"Inter",Arial,sans-serif;}
    canvas{width:100%;height:100%;display:block;touch-action:none;
           background:radial-gradient(circle at center,#32005a 0%,#000 85%);}
    #hud{position:fixed;top:14px;left:18px;color:#fff;font-size:15px;text-shadow:0 0 4px rgba(255,255,255,.3);z-index:2;}
    #compass{position:fixed;top:60px;left:18px;color:#aaa;font-size:12px;line-height:12px;
             letter-spacing:1px;text-shadow:0 0 2px #000;z-index:2;}
    #effBar{position:fixed;bottom:14px;left:18px;width:220px;height:18px;border-radius:9px;
            background:rgba(255,255,255,.12);z-index:2;}
    #effFill{width:100%;height:100%;border-radius:9px;background:#00e4b8;}
    #pauseBtn{position:fixed;top:14px;right:18px;font-size:22px;color:#fff;cursor:pointer;user-select:none;z-index:2;}
    #radarWrap{position:fixed;top:48px;right:18px;width:70px;height:70px;display:none;z-index:2;}
    #radar{width:70px;height:70px;border:1px solid #555;border-radius:4px;background:rgba(0,0,0,.4);}

    /* === ZOOM BAR START === */
    #zoomWrap{position:fixed;top:130px;right:18px;width:70px;z-index:2;}
    #zoomSlider{width:70px;}           /* horizontal slider – works reliably on iOS/Safari */
    /* === ZOOM BAR END ===   */
  </style>
</head>
<body>
<canvas id="game"></canvas>

<div id="hud">Mass: <span id="mass">10</span>&nbsp; Score: <span id="score">0</span>&nbsp; <span id="level">1</span></div>
<div id="compass">N<br>E&nbsp;&nbsp;W<br>&nbsp;S</div>
<div id="effBar"><div id="effFill"></div></div>
<div id="pauseBtn">⏸︎</div>

<div id="radarWrap"><canvas id="radar" width="70" height="70"></canvas></div>

<!-- === ZOOM BAR START === -->
<div id="zoomWrap">
  <input type="range" id="zoomSlider" min="0.5" max="2" step="0.05" value="1">
</div>
<!-- === ZOOM BAR END ===   -->

<audio id="backgroundMusic" src="background-music.mp3" loop preload="auto"></audio>

<script>
/* ===== CONSTANTS ===== */
const MASS_THRESH=600,
/* … unchanged constants … */
      RADAR_PADDING=4;             // keep dot off the frame

/* ===== CANVAS ===== */
const canvas=document.getElementById('game'),ctx=canvas.getContext('2d');
let W,H;
function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight;}resize();
addEventListener('resize',resize);

/* ===== ZOOM BAR ===== */
const zoomSlider=document.getElementById('zoomSlider');
let camScale=1;                                  // current camera zoom
zoomSlider.addEventListener('input',()=>{camScale=parseFloat(zoomSlider.value);});

/* ===== HUD refs ===== */
const massEl=document.getElementById('mass'),scoreEl=document.getElementById('score'),levelEl=document.getElementById('level');
const pauseBtn=document.getElementById('pauseBtn'),radarWrap=document.getElementById('radarWrap'),radar=document.getElementById('radar'),rctx=radar.getContext('2d');

/* ===== PLAYER & WORLD ===== */
let player={x:0,y:0,r:15,mass:10,tail:[],baseSpeed:2.5,blink:0,speedBoost:0};
let target={x:0,y:0,active:false};
let offset={x:W/2,y:H/2};

/* … (all your spawn/util/logic code stays exactly the same) … */

/* ===== INPUT ===== */
function setT(p){
  /* convert screen → world coords, taking zoom & translation into account */
  const worldX=(p.clientX - offset.x*camScale)/camScale;
  const worldY=(p.clientY - offset.y*camScale)/camScale;
  target.x=worldX; target.y=worldY;
}
canvas.addEventListener("pointerdown",e=>{if(!paused){setT(e);target.active=true;}});
canvas.addEventListener("pointermove",e=>{if(target.active&&!paused)setT(e);});
canvas.addEventListener("pointerup",()=>target.active=false);

/* ===== GAME LOOP ===== */
let last=0,level=1,flash=0;
function loop(ts){
  if(paused){ last=ts; requestAnimationFrame(loop); return; }
  const dt=(ts-last)||16; last=ts;

  /* … movement, game-logic, etc – unchanged … */

  /* --- camera --- */
  offset.x=W/(2*camScale)-player.x;
  offset.y=H/(2*camScale)-player.y;
  ctx.setTransform(camScale,0,0,camScale,offset.x*camScale,offset.y*camScale);
  ctx.clearRect(-offset.x,-offset.y,W/camScale,H/camScale);

  /* --- draw world, radar, HUD (unchanged) --- */

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* ===== DRAW HELPERS & MUSIC (unchanged) ===== */
</script>
</body>
</html>
